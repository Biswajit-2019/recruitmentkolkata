<?php defined('BASEPATH') OR exit('No direct script access allowed');class Banner extends CI_Controller {public function __construct()      {		parent::__construct();	 		$this->load->model(array('Hindi_admin_model'));				}	public function index()	{		if($this->session->userdata('user_id'))		{		$this->load->view('admin/hindi/includes/function');			$page = (int) (!isset($_GET["page"]) ? 1 : $_GET["page"]);		$limit = 5;		$startpoint = ($page * $limit) - $limit;		$statement = "`hindi_banner`";		$data['banner'] =$this->Hindi_admin_model->getAll('hindi_banner',$param='',$order_by_fld='',$order_by='',$limit,$startpoint);		$Num=$this->Hindi_admin_model->getCounts("SELECT COUNT(*) as `num` FROM {$statement}");		$data['num']=$Num[0]->num;		$data['limit'] = $limit;		$data['startpoint'] = $startpoint;		$data['statement'] = $statement;		$data['page'] = $page;		$this->load->view('admin/hindi/includes/header');		$this->load->view('admin/hindi/banner',$data);		$this->load->view('admin/hindi/includes/footer');		}		else		{			redirect('admin/hindi/dashboard');		}	}	public function add_banner()	{		if($this->session->userdata('user_id'))		{		if($this->input->post('add_banner'))		{			$config['upload_path'] = './public/uploaded/banner';			$config['allowed_types'] = 'gif|jpg|jpeg|png';			$this->load->library('upload', $config);										if($this->upload->do_upload('fileup'))				{											$image_detail = $this->upload->data();										$file_name = $image_detail['file_name'];						$param=array('title'=>$this->input->post('title'),'text'=>$this->input->post('content'),					'images'=>base_url().'public/uploaded/banner/'.$file_name,'status'=>'Y');					$this->Hindi_admin_model->insertData('hindi_banner',$param);					$this->session->set_flashdata('success', 'Banner Added Successfully');					redirect('admin/hindi/banner');				}				else				{					redirect('admin/hindi/banner');				}		}		else		{			$this->load->view('admin/hindi/includes/header');			$this->load->view('admin/hindi/add-banner');			$this->load->view('admin/hindi/includes/footer');		}		}		else		{			redirect('admin/hindi/dashboard');		}	}	public function Delete()	{	if($this->session->userdata('user_id'))	{					$id=$this->input->get('id');		if(!$this->input->get('id'))		{					redirect('admin/hindi/banner');		}		else		{		$res=$this->Hindi_admin_model->delete_banner($id);		if($res==1)		redirect('admin/hindi/banner');		}	}	else	{		redirect('admin/hindi');	}			}		public function edit()	{		if($this->session->userdata('user_id'))	{		$id=$this->input->get('id');		$data['banner_row'] =$this->Hindi_admin_model->view_edit_banner($id);		$this->load->view('admin/hindi/includes/header');		$this->load->view('admin/hindi/edit_banner',$data);		$this->load->view('admin/hindi/includes/footer');	}	else	{		redirect('admin/hindi');	}	}		public function edit_banner()	{		if($this->session->userdata('user_id'))	{		$a=$this->input->post('id');				if($this->input->post('edit_banner'))				{						$config['upload_path'] = '././public/uploaded/banner';			$config['allowed_types'] = 'gif|jpg|jpeg|png';			$this->load->library('upload', $config);														if($this->upload->do_upload('fileup'))				{																									$image_detail = $this->upload->data();					$file_name = $image_detail['file_name'];					$param=array('title'=>$this->input->post('title'),'text'=>$this->input->post('content'),					'images'=>base_url().'public/uploaded/banner/'.$file_name,'status'=>'Y');										$this->Hindi_admin_model->updateData($param,'hindi_banner',array('id'=>$a));					$this->session->set_flashdata('msg', 'Data Updated');										redirect('admin/hindi/banner');				}				else						{							$param=array('title'=>$this->input->post('title'),'text'=>$this->input->post('content'),'status'=>'Y');										$this->Hindi_admin_model->updateData($param,'hindi_banner',array('id'=>$a));							redirect('admin/hindi/banner');					}		}				else			{			$this->load->view('admin/hindi/includes/header');			$this->load->view('admin/hindi/add-banner');			$this->load->view('admin/hindi/includes/footer');		}				}	else	{		redirect('admin/hindi');	}		}}